@page "/"
@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager
@inject DialogService DialogService
@inject ContextMenuService ContextMenuService
@inject TooltipService TooltipService
@inject NotificationService NotificationService
@using AutoCAC.Components.Templates

<PageTitle>Index</PageTitle>
<RPMSOutput />

@code {
    [CascadingParameter(Name = "MainLayout")] public MainLayout mainLayout { get; set; }
    private MainLayout Layout => mainLayout ?? new MainLayout();

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            if (!Layout.RPMS.IsConnected) return;
            try
            {
                Layout.RPMS.GoToMainMenu();
            }
            catch (Exception ex)
            {
                Layout!.ErrorMessage = ex.Message;
            }
            await InvokeAsync(StateHasChanged);
        }
    }
}

