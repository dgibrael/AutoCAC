@page "/"
@inject IJSRuntime JS
@inject NavigationManager NavigationManager
@inject DialogService DialogService
@inject ContextMenuService ContextMenuService
@inject TooltipService TooltipService
@inject NotificationService NotificationService
@using AutoCAC.Components.Templates
@using AutoCAC.Extensions
@using static RPMSService

<PageTitle>Index</PageTitle>
<RPMSOutput @ref="RPMSRef" />
<DynamicDataGrid TItem="IDictionary<string, object>" Data="ParsedData"/>

@code {
    [CascadingParameter(Name = "MainLayout")] public MainLayout Layout { get; set; }
    private IEnumerable<IDictionary<string, object>> ParsedData;
    private RPMSOutput RPMSRef;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await RPMSRef.RunWhenSignedIn(RunRPMSCommands);
        }
    }

    private async Task RunRPMSCommands()
    {

        await Layout.GoToMenu();
    }
}

