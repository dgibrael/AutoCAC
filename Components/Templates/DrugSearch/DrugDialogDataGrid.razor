@using System.Linq.Expressions
@using AutoCAC.Models

<DataGridDialog TItem="Drug" GridModel="GridModel" />

@code {
    [Parameter] public Expression<Func<Drug, bool>> WherePredicate { get; set; }
    private DataGridHelper<AutoCAC.Models.Drug> GridModel = new()
    {
        SearchColumns = new[] { "Name", "PharmacyOrderableItem" },
        IncludeColumns = new[] { "Name", "PharmacyOrderableItem", "Id" }
    };
    protected override void OnInitialized()
    {
        GridModel.QueryFactory = db =>
        {
            IQueryable<Drug> query = db.Drugs;

            if (WherePredicate != null)
            {
                query = query.Where(WherePredicate);
            }

            return query;
        };
    }
}
